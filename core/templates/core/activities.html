{% extends 'core/base.html' %}
{% block content %}
<div class='container-main'>
    <h2>👟 Your Activities</h2>
    
    <div class='row mb-4'>
        <div class='col-md-4'>
            <div class='card p-3 text-center bg-success text-white'>
                <h3>{{ completed_today }}</h3>
                <small>Completed Today</small>
            </div>
        </div>
        <div class='col-md-4'>
            <div class='card p-3 text-center bg-info text-white'>
                <h3>{{ total_points }}</h3>
                <small>Total Points</small>
            </div>
        </div>
        <div class='col-md-4'>
            <div class='card p-3 text-center bg-warning text-white'>
                <h3>{{ streak }}</h3>
                <small>Day Streak 🔥</small>
            </div>
        </div>
    </div>
    
    <h4>📋 Recommended Activities</h4>
    {% for activity in activities %}
    <div class='card p-3 mb-3'>
        <div class='row align-items-center'>
            <div class='col-md-8'>
                <h5>{{ activity.title }}</h5>
                <p class='text-muted mb-2'>{{ activity.description }}</p>
                <span class='badge bg-info'>{{ activity.duration }} min</span>
                <span class='badge bg-secondary'>{{ activity.difficulty }}</span>
                <span class='badge bg-warning'>+{{ activity.points }} pts</span>
            </div>
            <div class='col-md-4 text-end'>
                {% if activity.video_url %}
                <a href='{{ activity.video_url }}' target='_blank' class='btn btn-outline-primary btn-sm mb-2'>▶️ Watch Video</a>
                {% endif %}
                <form method='post' action='{% url "complete_recommendation" activity.id %}'>
                    {% csrf_token %}
                    <button type='submit' class='btn btn-success w-100'>✅ Mark Complete</button>
                </form>
            </div>
        </div>
    </div>
    {% empty %}
    <p class='text-muted'>No activities available. Check back tomorrow!</p>
    {% endfor %}
    
    <h4 class='mt-4'>🏅 Your Badges</h4>
    <div class='row'>
        {% for badge in badges %}
        <div class='col-md-3 mb-3'>
            <div class='card p-3 text-center'>
                <div style='font-size: 3rem;'>{{ badge.icon }}</div>
                <h6>{{ badge.name }}</h6>
                <small class='text-muted'>Earned {{ badge.earned_at|date:"M d" }}</small>
            </div>
        </div>
        {% empty %}
        <p class='text-muted'>Complete activities to earn badges!</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
