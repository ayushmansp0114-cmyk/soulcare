{% extends 'core/base.html' %}
{% block content %}
<div class='container-main'>
    <h2 class='mb-4'>🏫 Chat with {{ student.get_full_name }}</h2>
    <div class='card p-3 mb-3' style='height:400px; overflow-y:scroll; background:#f8fafc;'>
        {% for msg in messages %}
        <div class='mb-3 {% if msg.is_mine %}text-end{% endif %}'>
            <div class='chat-bubble {% if msg.is_mine %}chat-bubble-sent{% else %}chat-bubble-received{% endif %}'>
                <strong>{{ msg.sender.get_full_name }}</strong><br>
                {{ msg.message }}
                <br><small>{{ msg.timestamp|date:"h:i A" }}</small>
            </div>
        </div>
        {% endfor %}
    </div>
    <form method='post'>
        {% csrf_token %}
        <div class='input-group'>
            <input type='text' name='message' class='form-control' placeholder='Type your message...' required>
            <button type='submit' class='btn btn-primary'>Send</button>
        </div>
    </form>
</div>
{% endblock %}
