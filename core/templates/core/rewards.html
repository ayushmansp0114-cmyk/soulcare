{% extends 'core/base.html' %}
{% block content %}
<div class='container-main'>
    <h2 class='mb-4'>🏆 Rewards & Badges</h2>
    <div class='row mb-4'>
        <div class='col-md-6'>
            <div class='card p-4 text-center'>
                <h3>{{ profile.points }}</h3>
                <p>Total Points</p>
            </div>
        </div>
        <div class='col-md-6'>
            <div class='card p-4 text-center'>
                <h3>Level {{ profile.level }}</h3>
                <p>Current Level</p>
            </div>
        </div>
    </div>
    <h4 class='mb-3'>Your Badges</h4>
    <div class='row g-3'>
        {% for badge in available_badges %}
        <div class='col-md-4'>
            <div class='card p-4 text-center {% if badge.earned %}bg-success text-white{% else %}bg-light{% endif %}'>
                <h2>{{ badge.icon }}</h2>
                <h5>{{ badge.name }}</h5>
                <p class='mb-2'>{{ badge.points }} points</p>
                {% if badge.earned and not badge.claimed and badge.badge_obj %}
                    <form method='post'>
                        {% csrf_token %}
                        <input type='hidden' name='badge_id' value='{{ badge.badge_obj.id }}'>
                        <button type='submit' class='btn btn-warning'>Claim Badge</button>
                    </form>
                {% elif badge.claimed %}
                    <span class='badge bg-primary'>Claimed ✓</span>
                {% else %}
                    <small>Requires {{ badge.required }}-day streak</small>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
